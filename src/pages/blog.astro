---
import BlogPostList from "../components/BlogPostList.astro";

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob("./blog/**/*.{md,mdx}"))
    .sort(
        (a, b) =>
            new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
    )
    .filter((post) => !post.frontmatter.draft) as Post[];
---

<BlogPostList posts={posts} />
