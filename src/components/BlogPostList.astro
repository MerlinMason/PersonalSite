---
import PageLayout from "../layouts/Page.astro";
import TagFilters from "./TagFilters.astro";
import Card from "./Card.astro";
import JazzyText from "../components/JazzyText.astro";
import BlogPostMeta from "./BlogPostMeta.astro";

interface Props {
    posts: Post[];
    tag?: string;
}

const { posts, tag } = Astro.props;
---

<PageLayout
    title="Blog"
    description="Merlin Masons blog about frontend engineering, TypeScript and React"
    image="/smile.png"
>
    <h1 class="font-bold text-hero mb-8">
        {
            tag ? (
                <>
                    My blog: <JazzyText>{tag}</JazzyText>.
                </>
            ) : (
                <>
                    My <JazzyText>blog</JazzyText>.
                </>
            )
        }
    </h1>

    <TagFilters />

    <ul class="space-y-24 w-full block">
        {
            posts.map((post) => (
                <li>
                    <Card>
                        <a href={post.url}>
                            <img
                                class="max-w-full h-auto mb-6 mx-auto"
                                src={post.frontmatter.heroImage}
                                alt={post.frontmatter.title}
                            />

                            <h1 class="font-bold text-4xl mb-6 hover:text-slate-700">
                                {post.frontmatter.title}
                            </h1>
                        </a>

                        <BlogPostMeta
                            timeToRead={post.frontmatter.timeToRead}
                            tags={post.frontmatter.tags}
                            pubDate={post.frontmatter.pubDate}
                        />
                    </Card>
                </li>
            ))
        }
    </ul>
</PageLayout>
